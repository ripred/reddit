{
  "approved_at_utc": null,
  "subreddit": "arduino",
  "selftext": "I try to display one of nine different symbols with TFT-eSPI based on a recveived value. The value is read out with &lt;Dexcom\\_follow.h&gt; and converted to a int value between 1 and 9. Then, in the void() loop I want to display the corresponding symbol (icon1 to icon9).\n\nThe code will compile without errors. The debug output at the console shows the correct value, but tft.pushImage does not put the sympol on the scren. If I put the image directly (outside of the swich ..case) it will be printed.\n\nAny idea what I did wrong?\n\n    /*\n      POC for the Mobile ClucView project\n      ESP32 Dev Modul with WiFi and Bluetooth\n      Get data from Dexcom Follower App source\n      Display on onboard display\n    */\n    \n    // include Stuff\n    #include &lt;WiFi.h&gt;\n    #include &lt;Dexcom_follow.h&gt;\n    #include &lt;TFT_eSPI.h&gt;\n    #include &lt;SPI.h&gt;\n    \n    // include Trend Symbols\n    #include \"icon1.h\";\n    #include \"icon2.h\";\n    #include \"icon3.h\";\n    #include \"icon4.h\";\n    #include \"icon5.h\";\n    #include \"icon6.h\";\n    #include \"icon7.h\";\n    #include \"icon8.h\";\n    #include \"icon9.h\";\n    \n    // Some Vars for Glucose Output\n    float GlucNow;\n    String Trend;\n    String TrendSymbol;\n    int TrendVal;\n    \n    // Display Stuff\n    TFT_eSPI tft = TFT_eSPI();  // Invoke library, pins defined in User_Setup.h\n    \n    unsigned long targetTime = 0;\n    byte red = 31;\n    byte green = 0;\n    byte blue = 0;\n    byte state = 0;\n    unsigned int colour = red &lt;&lt; 11;\n    \n    // Time Stuff\n    const char* ntpServer = \"pool.ntp.org\";\n    const long  gmtOffset_sec = 3600;\n    const int   daylightOffset_sec = 3600;\n    \n    // WiFi Credentials\n    //const char* ssid = \"****\";\n    //const char* password = \"****\";\n    const char* ssid = \"****\";\n    const char* password = \"****\";\n    \n    // Setup\n    void setup() {\n      Serial.begin(115200);\n    \n      tft.begin();\n      tft.setRotation(1);\n      tft.setSwapBytes(false);\n      tft.fillScreen(TFT_WHITE);\n      tft.setTextDatum(TC_DATUM);\n      targetTime = millis() + 100;\n      \n      tft.setTextColor(TFT_BLACK);\n      tft.setCursor (30, 5);\n      tft.setTextSize(2);\n      tft.setTextColor(TFT_WHITE);\n      tft.print(\"***** Mobile GlucView\");\n      tft.setTextSize(1);\n      \n    }\n    \n    // Loop\n    void loop() {\n      // Read Dexcom Data \n      ReadDexcom();\n    \n      // write Stuff to Display\n      tft.fillScreen(TFT_WHITE);\n      tft.setCursor (30, 5);\n      tft.setTextSize(2);\n      tft.setTextColor(TFT_BLACK);\n      tft.print(\"***** Mobile GlucView\");\n      tft.setTextSize(1);\n      tft.setTextColor(TFT_BLACK);\n    \n      // write Clucose Reading\n      tft.drawFloat(GlucNow, 2, 120, 95, 8);\n      \n      // Dusplay Trend Symbol, Switch trough TrendVal\n      switch(TrendVal)  {\n        case 1:tft.pushImage(260,110,50,50,icon1);\n        break;\n        case 3:tft.pushImage(260,110,50,50,icon3);\n        break;\n        case 5:tft.pushImage(260,110,50,50,icon5);\n        break;\n      }\n      delay (60000);\n    }\n    \n    // Connect WiFi\n    void initWiFi() {\n      WiFi.mode(WIFI_STA);\n      WiFi.begin(ssid, password);\n      Serial.print(\"Connecting to WiFi ..\");\n      while (WiFi.status() != WL_CONNECTED) {\n        Serial.print('.');\n        delay(1000);\n      }\n      Serial.println();\n      Serial.print(\"WiFi Connected. IP Address: \");\n      Serial.println(WiFi.localIP());\n    }\n    \n    // Disconnect WiFi\n    void disWiFi() {\n      if (WiFi.status() == WL_CONNECTED) {\n        WiFi.disconnect();\n      }\n      Serial.println(\"WiFi disconnected\");\n    }\n    \n    // Get Dexcom Data\n    void ReadDexcom() {\n    \n      // Connect WiFi\n      if (WiFi.status() != WL_CONNECTED) {\n        initWiFi();\n      }\n    \n      delay (500);\n    \n      // Read Dexcom Data\n      // Debugging Info\n      Serial.println(\"Beginn Read Dexcom Data Loop\");\n    \n      Follower follower(true, \"****\", \"****\"); // to dexcom\n      follower.getNewSessionID();\n      follower.GlucoseLevelsNow();\n      Serial.println();\n    \n      // set Variable Values for processing in void() loop\n      GlucNow = follower.GlucoseNow.mmol_l;\n      Trend = follower.GlucoseNow.trend_Symbol;\n      TrendVal = atoi(follower.GlucoseNow.trend_Symbol);\n    \n      // Debug Outpuz  \n      Serial.println(GlucNow);\n      Serial.println(Trend);\n      Serial.print(\"TrendVal (int): \");\n      Serial.println(TrendVal);\n    \n      // Disconnect WiFi\n      disWiFi();\n    \n      //Debugging Info\n      Serial.println(\"End Read Dexcom Data Loop\");\n    }\n    \n    \n    \n    ",
  "author_fullname": "t2_6mdy18a",
  "saved": false,
  "mod_reason_title": null,
  "gilded": 0,
  "clicked": false,
  "title": "Selecting image to display with TFT_eSPI and switch statement",
  "link_flair_richtext": [],
  "subreddit_name_prefixed": "r/arduino",
  "hidden": false,
  "pwls": 6,
  "link_flair_css_class": null,
  "downs": 0,
  "thumbnail_height": null,
  "top_awarded_type": null,
  "hide_score": false,
  "name": "t3_1ik8vw5",
  "quarantine": false,
  "link_flair_text_color": "dark",
  "upvote_ratio": 1.0,
  "author_flair_background_color": null,
  "subreddit_type": "public",
  "ups": 1,
  "total_awards_received": 0,
  "media_embed": {},
  "thumbnail_width": null,
  "author_flair_template_id": null,
  "is_original_content": false,
  "user_reports": [],
  "secure_media": null,
  "is_reddit_media_domain": false,
  "is_meta": false,
  "category": null,
  "secure_media_embed": {},
  "link_flair_text": null,
  "can_mod_post": false,
  "score": 1,
  "approved_by": null,
  "is_created_from_ads_ui": false,
  "author_premium": true,
  "thumbnail": "self",
  "edited": false,
  "author_flair_css_class": null,
  "author_flair_richtext": [],
  "gildings": {},
  "content_categories": null,
  "is_self": true,
  "mod_note": null,
  "created": 1738970594.0,
  "link_flair_type": "text",
  "wls": 6,
  "removed_by_category": null,
  "banned_by": null,
  "author_flair_type": "text",
  "domain": "self.arduino",
  "allow_live_comments": false,
  "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I try to display one of nine different symbols with TFT-eSPI based on a recveived value. The value is read out with &amp;lt;Dexcom\\_follow.h&amp;gt; and converted to a int value between 1 and 9. Then, in the void() loop I want to display the corresponding symbol (icon1 to icon9).&lt;/p&gt;\n\n&lt;p&gt;The code will compile without errors. The debug output at the console shows the correct value, but tft.pushImage does not put the sympol on the scren. If I put the image directly (outside of the swich ..case) it will be printed.&lt;/p&gt;\n\n&lt;p&gt;Any idea what I did wrong?&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;/*\n  POC for the Mobile ClucView project\n  ESP32 Dev Modul with WiFi and Bluetooth\n  Get data from Dexcom Follower App source\n  Display on onboard display\n*/\n\n// include Stuff\n#include &amp;lt;WiFi.h&amp;gt;\n#include &amp;lt;Dexcom_follow.h&amp;gt;\n#include &amp;lt;TFT_eSPI.h&amp;gt;\n#include &amp;lt;SPI.h&amp;gt;\n\n// include Trend Symbols\n#include &amp;quot;icon1.h&amp;quot;;\n#include &amp;quot;icon2.h&amp;quot;;\n#include &amp;quot;icon3.h&amp;quot;;\n#include &amp;quot;icon4.h&amp;quot;;\n#include &amp;quot;icon5.h&amp;quot;;\n#include &amp;quot;icon6.h&amp;quot;;\n#include &amp;quot;icon7.h&amp;quot;;\n#include &amp;quot;icon8.h&amp;quot;;\n#include &amp;quot;icon9.h&amp;quot;;\n\n// Some Vars for Glucose Output\nfloat GlucNow;\nString Trend;\nString TrendSymbol;\nint TrendVal;\n\n// Display Stuff\nTFT_eSPI tft = TFT_eSPI();  // Invoke library, pins defined in User_Setup.h\n\nunsigned long targetTime = 0;\nbyte red = 31;\nbyte green = 0;\nbyte blue = 0;\nbyte state = 0;\nunsigned int colour = red &amp;lt;&amp;lt; 11;\n\n// Time Stuff\nconst char* ntpServer = &amp;quot;pool.ntp.org&amp;quot;;\nconst long  gmtOffset_sec = 3600;\nconst int   daylightOffset_sec = 3600;\n\n// WiFi Credentials\n//const char* ssid = &amp;quot;****&amp;quot;;\n//const char* password = &amp;quot;****&amp;quot;;\nconst char* ssid = &amp;quot;****&amp;quot;;\nconst char* password = &amp;quot;****&amp;quot;;\n\n// Setup\nvoid setup() {\n  Serial.begin(115200);\n\n  tft.begin();\n  tft.setRotation(1);\n  tft.setSwapBytes(false);\n  tft.fillScreen(TFT_WHITE);\n  tft.setTextDatum(TC_DATUM);\n  targetTime = millis() + 100;\n\n  tft.setTextColor(TFT_BLACK);\n  tft.setCursor (30, 5);\n  tft.setTextSize(2);\n  tft.setTextColor(TFT_WHITE);\n  tft.print(&amp;quot;***** Mobile GlucView&amp;quot;);\n  tft.setTextSize(1);\n\n}\n\n// Loop\nvoid loop() {\n  // Read Dexcom Data \n  ReadDexcom();\n\n  // write Stuff to Display\n  tft.fillScreen(TFT_WHITE);\n  tft.setCursor (30, 5);\n  tft.setTextSize(2);\n  tft.setTextColor(TFT_BLACK);\n  tft.print(&amp;quot;***** Mobile GlucView&amp;quot;);\n  tft.setTextSize(1);\n  tft.setTextColor(TFT_BLACK);\n\n  // write Clucose Reading\n  tft.drawFloat(GlucNow, 2, 120, 95, 8);\n\n  // Dusplay Trend Symbol, Switch trough TrendVal\n  switch(TrendVal)  {\n    case 1:tft.pushImage(260,110,50,50,icon1);\n    break;\n    case 3:tft.pushImage(260,110,50,50,icon3);\n    break;\n    case 5:tft.pushImage(260,110,50,50,icon5);\n    break;\n  }\n  delay (60000);\n}\n\n// Connect WiFi\nvoid initWiFi() {\n  WiFi.mode(WIFI_STA);\n  WiFi.begin(ssid, password);\n  Serial.print(&amp;quot;Connecting to WiFi ..&amp;quot;);\n  while (WiFi.status() != WL_CONNECTED) {\n    Serial.print(&amp;#39;.&amp;#39;);\n    delay(1000);\n  }\n  Serial.println();\n  Serial.print(&amp;quot;WiFi Connected. IP Address: &amp;quot;);\n  Serial.println(WiFi.localIP());\n}\n\n// Disconnect WiFi\nvoid disWiFi() {\n  if (WiFi.status() == WL_CONNECTED) {\n    WiFi.disconnect();\n  }\n  Serial.println(&amp;quot;WiFi disconnected&amp;quot;);\n}\n\n// Get Dexcom Data\nvoid ReadDexcom() {\n\n  // Connect WiFi\n  if (WiFi.status() != WL_CONNECTED) {\n    initWiFi();\n  }\n\n  delay (500);\n\n  // Read Dexcom Data\n  // Debugging Info\n  Serial.println(&amp;quot;Beginn Read Dexcom Data Loop&amp;quot;);\n\n  Follower follower(true, &amp;quot;****&amp;quot;, &amp;quot;****&amp;quot;); // to dexcom\n  follower.getNewSessionID();\n  follower.GlucoseLevelsNow();\n  Serial.println();\n\n  // set Variable Values for processing in void() loop\n  GlucNow = follower.GlucoseNow.mmol_l;\n  Trend = follower.GlucoseNow.trend_Symbol;\n  TrendVal = atoi(follower.GlucoseNow.trend_Symbol);\n\n  // Debug Outpuz  \n  Serial.println(GlucNow);\n  Serial.println(Trend);\n  Serial.print(&amp;quot;TrendVal (int): &amp;quot;);\n  Serial.println(TrendVal);\n\n  // Disconnect WiFi\n  disWiFi();\n\n  //Debugging Info\n  Serial.println(&amp;quot;End Read Dexcom Data Loop&amp;quot;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;",
  "likes": null,
  "suggested_sort": "confidence",
  "banned_at_utc": null,
  "view_count": null,
  "archived": false,
  "no_follow": true,
  "is_crosspostable": false,
  "pinned": false,
  "over_18": false,
  "all_awardings": [],
  "awarders": [],
  "media_only": false,
  "can_gild": false,
  "spoiler": false,
  "locked": false,
  "author_flair_text": null,
  "treatment_tags": [],
  "visited": false,
  "removed_by": null,
  "num_reports": null,
  "distinguished": null,
  "subreddit_id": "t5_2qknj",
  "author_is_blocked": false,
  "mod_reason_by": null,
  "removal_reason": null,
  "link_flair_background_color": "",
  "id": "1ik8vw5",
  "is_robot_indexable": true,
  "report_reasons": null,
  "author": "Squeeech",
  "discussion_type": null,
  "num_comments": 2,
  "send_replies": true,
  "contest_mode": false,
  "mod_reports": [],
  "author_patreon_flair": false,
  "author_flair_text_color": null,
  "permalink": "/r/arduino/comments/1ik8vw5/selecting_image_to_display_with_tft_espi_and/",
  "stickied": false,
  "url": "https://www.reddit.com/r/arduino/comments/1ik8vw5/selecting_image_to_display_with_tft_espi_and/",
  "subreddit_subscribers": 691347,
  "created_utc": 1738970594.0,
  "num_crossposts": 0,
  "media": null,
  "is_video": false
}