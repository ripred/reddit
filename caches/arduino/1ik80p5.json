{
  "approved_at_utc": null,
  "subreddit": "arduino",
  "selftext": "Hi everyone,  \nI'm working on an Arduino Uno project that uses a SIM7020G NB-IoT module (with a Movistar NB-IoT SIM card). My goal is to send/receive SMS and also connect to an MQTT broker (EMQX) or make HTTP requests. However, I'm running into a few major issues:\n\n1. **SMS Failure**:\n   * I can\u2019t send or receive SMS using standard AT commands (like `AT+CMGF=1`, `AT+CMGS=\"...\"`). I keep getting error messages (for example, `+CMS ERROR: ...`), or it just doesn't work at all. I've read that SMS might not be enabled on some NB-IoT networks, but I'm not fully sure if that's the case here.\n2. **No Internet Connectivity (MQTT/HTTP)**:\n   * I can\u2019t establish a data connection to my broker via MQTT (`AT+CMQTTCONNECT`) or to any HTTP endpoint (`AT+CHTTPCREATE`, etc.). I configured the APN (`AT+CGDCONT=1,\"IP\",\"&lt;my_apn&gt;\"`), and I see that the module appears to register on the NB-IoT network (`AT+CEREG=...` returns status 1). But when I try to connect, I always get connection errors or timeouts.\n3. **What I\u2019ve Tried**:\n   * Verified the SIM is recognized and unlocked (`AT+CPIN?` \\-&gt; READY).\n   * Checked signal quality (`AT+CSQ` returns values like \\~10-15, which should be acceptable).\n   * Used `AT+CGATT=1` to attach to the network and confirmed with `AT+CGATT?`.\n   * Attempted to force NB-IoT mode only (`AT+CNMP=38` or similar).\n   * Tried different APN settings, but not entirely sure which APN is correct for NB-IoT in my region.\n   * Consulted the SIM7020G documentation for firmware-specific commands (`AT+CFUN=1`, `AT+NBAND=...`, etc.), but still no luck.\n\nHas anyone successfully used the SIM7020G on a Movistar NB-IoT SIM/card to send SMS or establish MQTT/HTTP connections? Are there any special APN details, band settings, or operator-specific requirements I might be missing?\n\nAny guidance or shared experiences would be greatly appreciated. Thank you!",
  "author_fullname": "t2_jki2n81eo",
  "saved": false,
  "mod_reason_title": null,
  "gilded": 0,
  "clicked": false,
  "title": "Need Help with SIM7020G NB-IoT Module: Can't Send SMS or Connect to MQTT/HTTP",
  "link_flair_richtext": [],
  "subreddit_name_prefixed": "r/arduino",
  "hidden": false,
  "pwls": 6,
  "link_flair_css_class": null,
  "downs": 0,
  "thumbnail_height": null,
  "top_awarded_type": null,
  "hide_score": false,
  "name": "t3_1ik80p5",
  "quarantine": false,
  "link_flair_text_color": "dark",
  "upvote_ratio": 1.0,
  "author_flair_background_color": null,
  "subreddit_type": "public",
  "ups": 1,
  "total_awards_received": 0,
  "media_embed": {},
  "thumbnail_width": null,
  "author_flair_template_id": null,
  "is_original_content": false,
  "user_reports": [],
  "secure_media": null,
  "is_reddit_media_domain": false,
  "is_meta": false,
  "category": null,
  "secure_media_embed": {},
  "link_flair_text": null,
  "can_mod_post": false,
  "score": 1,
  "approved_by": null,
  "is_created_from_ads_ui": false,
  "author_premium": false,
  "thumbnail": "self",
  "edited": false,
  "author_flair_css_class": null,
  "author_flair_richtext": [],
  "gildings": {},
  "content_categories": null,
  "is_self": true,
  "mod_note": null,
  "created": 1738968297.0,
  "link_flair_type": "text",
  "wls": 6,
  "removed_by_category": null,
  "banned_by": null,
  "author_flair_type": "text",
  "domain": "self.arduino",
  "allow_live_comments": false,
  "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hi everyone,&lt;br/&gt;\nI&amp;#39;m working on an Arduino Uno project that uses a SIM7020G NB-IoT module (with a Movistar NB-IoT SIM card). My goal is to send/receive SMS and also connect to an MQTT broker (EMQX) or make HTTP requests. However, I&amp;#39;m running into a few major issues:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;SMS Failure&lt;/strong&gt;:\n\n&lt;ul&gt;\n&lt;li&gt;I can\u2019t send or receive SMS using standard AT commands (like &lt;code&gt;AT+CMGF=1&lt;/code&gt;, &lt;code&gt;AT+CMGS=&amp;quot;...&amp;quot;&lt;/code&gt;). I keep getting error messages (for example, &lt;code&gt;+CMS ERROR: ...&lt;/code&gt;), or it just doesn&amp;#39;t work at all. I&amp;#39;ve read that SMS might not be enabled on some NB-IoT networks, but I&amp;#39;m not fully sure if that&amp;#39;s the case here.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;No Internet Connectivity (MQTT/HTTP)&lt;/strong&gt;:\n\n&lt;ul&gt;\n&lt;li&gt;I can\u2019t establish a data connection to my broker via MQTT (&lt;code&gt;AT+CMQTTCONNECT&lt;/code&gt;) or to any HTTP endpoint (&lt;code&gt;AT+CHTTPCREATE&lt;/code&gt;, etc.). I configured the APN (&lt;code&gt;AT+CGDCONT=1,&amp;quot;IP&amp;quot;,&amp;quot;&amp;lt;my_apn&amp;gt;&amp;quot;&lt;/code&gt;), and I see that the module appears to register on the NB-IoT network (&lt;code&gt;AT+CEREG=...&lt;/code&gt; returns status 1). But when I try to connect, I always get connection errors or timeouts.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;What I\u2019ve Tried&lt;/strong&gt;:\n\n&lt;ul&gt;\n&lt;li&gt;Verified the SIM is recognized and unlocked (&lt;code&gt;AT+CPIN?&lt;/code&gt; -&amp;gt; READY).&lt;/li&gt;\n&lt;li&gt;Checked signal quality (&lt;code&gt;AT+CSQ&lt;/code&gt; returns values like ~10-15, which should be acceptable).&lt;/li&gt;\n&lt;li&gt;Used &lt;code&gt;AT+CGATT=1&lt;/code&gt; to attach to the network and confirmed with &lt;code&gt;AT+CGATT?&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Attempted to force NB-IoT mode only (&lt;code&gt;AT+CNMP=38&lt;/code&gt; or similar).&lt;/li&gt;\n&lt;li&gt;Tried different APN settings, but not entirely sure which APN is correct for NB-IoT in my region.&lt;/li&gt;\n&lt;li&gt;Consulted the SIM7020G documentation for firmware-specific commands (&lt;code&gt;AT+CFUN=1&lt;/code&gt;, &lt;code&gt;AT+NBAND=...&lt;/code&gt;, etc.), but still no luck.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Has anyone successfully used the SIM7020G on a Movistar NB-IoT SIM/card to send SMS or establish MQTT/HTTP connections? Are there any special APN details, band settings, or operator-specific requirements I might be missing?&lt;/p&gt;\n\n&lt;p&gt;Any guidance or shared experiences would be greatly appreciated. Thank you!&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;",
  "likes": null,
  "suggested_sort": "confidence",
  "banned_at_utc": null,
  "view_count": null,
  "archived": false,
  "no_follow": true,
  "is_crosspostable": false,
  "pinned": false,
  "over_18": false,
  "all_awardings": [],
  "awarders": [],
  "media_only": false,
  "can_gild": false,
  "spoiler": false,
  "locked": false,
  "author_flair_text": null,
  "treatment_tags": [],
  "visited": false,
  "removed_by": null,
  "num_reports": null,
  "distinguished": null,
  "subreddit_id": "t5_2qknj",
  "author_is_blocked": false,
  "mod_reason_by": null,
  "removal_reason": null,
  "link_flair_background_color": "",
  "id": "1ik80p5",
  "is_robot_indexable": true,
  "report_reasons": null,
  "author": "Natsu-oblivion",
  "discussion_type": null,
  "num_comments": 0,
  "send_replies": true,
  "contest_mode": false,
  "mod_reports": [],
  "author_patreon_flair": false,
  "author_flair_text_color": null,
  "permalink": "/r/arduino/comments/1ik80p5/need_help_with_sim7020g_nbiot_module_cant_send/",
  "stickied": false,
  "url": "https://www.reddit.com/r/arduino/comments/1ik80p5/need_help_with_sim7020g_nbiot_module_cant_send/",
  "subreddit_subscribers": 691380,
  "created_utc": 1738968297.0,
  "num_crossposts": 0,
  "media": null,
  "is_video": false
}